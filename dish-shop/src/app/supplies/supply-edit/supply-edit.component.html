<div class="row">
    <div class="col-lg-12">
        <form [formGroup] = "supplyForm" (ngSubmit)="onSubmit()" class="form-custom rounded">
            <div class="row">
                <div class="col-lg-4">
                    <div class="form-group">
                        <label for="providerId">Choose provider id:</label>
                        <select 
                            id="providerId" 
                            formControlName="providerId" 
                            class="form-control" 
                            (change)="onProviderChanged($event.target.value)">
                            <option *ngFor="let provider of providers" [ngValue]="provider.id">{{ provider.name }}</option>
                        </select>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="form-group">
                        <label for="contractId">Choose contract id:</label>
                        <select
                            id="contractId" 
                            formControlName="contractId" 
                            class="form-control" 
                            (change)="onContractChanged($event.target.value)">
                            <option 
                             *ngFor="let contract of contracts" [ngValue]="contract.id">{{ contract.id }}</option>
                        </select>
                    </div>
                </div>
                <div class="col-lg-4 align-self-center">
                    <button class="btn btn-success" type="button" (click)="showContracts()">See contracts</button>
                </div>
            </div>
            <hr>
            <div class="row justify-content-center rounded">
                <div class="col-lg-11 contents" formArrayName="suppliesContents">
                    <div class="row"
                        *ngFor="let supplyContent of supplyForm.get('suppliesContents')['controls']; let i = index"
                        [formGroupName]="i"
                        style="margin-top: 10px;">
                        <div class="col-lg-5">
                            <select formControlName="productId" class="form-control">
                                <option *ngFor="let product of availableProducts" [ngValue]="product.id">
                                    {{ product.name }}</option>
                            </select>
                        </div>
                        <div class="col-lg-5" >
                            <input 
                            formControlName = "count"
                            type="number"
                            style="text-align: center;" 
                            class="form-control">
                        </div>
                        <div class="col-lg-2">
                            <button type="button" style="width: 100%;" class="btn btn-danger" (click)="onDeleteProductContent(i)">X</button>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-lg-8">
                    <button 
                        class="btn btn-success" 
                        type="button" 
                        (click)="onAdd()"
                        [disabled]="!isProductsAvailable">
                        Add item</button>
                </div>
                <div class="col-lg-2">
                        <button type="button" class="btn btn-danger" (click)="onCancel()">Cancel</button>
                </div>
                <div class="col-lg-2">
                    <button type="submit" class="btn btn-success"
                    style="width: 100%;"
                    [disabled]="!supplyForm.valid">Save</button>
            </div>
            </div>
        </form>
    </div>
</div>